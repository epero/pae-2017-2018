$(function() {
	FrontEnd.displayPage('pageLogin');
	
	function whoAmI() {
		config = {
					'type': 'POST',
					'url': '/',
					'action': 'whoami',
					'data': {},
					'succes': function(reponse){
						console.log(reponse);
						whoami = reponse;
						FrontEnd.displayPage('pageHome');
					},
					'error' : function(e) {
						console.log(reponse);
						FrontEnd.displayPage('pageLogin');
					}
				}
		FrontEnd.ajax(config);
	}
	
	whoAmI();
	
	
	$('#btnLogin').click(function(){
		//console.log('Test');
		var username = $('#inputLogin').val();
		var password = $('#inputMdp').val();
		
		config = {
					'type': 'POST',
					'url': '/',
					'action': 'signin',
					'data': {
								'user': username,
								'pswd': password
							},
					'success': function(reponse){
									if(reponse == "ok"){
										console.log("OK");
										FrontEnd.displayPage('pageCongrats');
									} else {
										console.log("KO");
										FrontEnd.displayPage('pageLogin');
									}
								},
					'error': function(reponse){
								console.log("KO");
								FrontEnd.displayPage('pageLogin');
							}
				 }
		FrontEnd.ajax(config);
	});
	
	/*
	$.ajax({
		url : 'liste',
		type : 'POST',
		data : {
			action : 'whoami',
		},
		success : function(reponse) {
			whoami = reponse;
			FrontEnd.displayPage('pageHome');
		},
		error : function(e) {
			FrontEnd.displayPage('pageLogin');
		}
*/
});