FrontEnd.onInitPage('pageLogin', function(){
	//console.log('pageLogin - onInitPage');
	$('#btnLogin').click(function(){
		var isvalid = $('#formLogin').valid();
		if(isvalid){
			config = {
						'data': {
									'action': 'signin',
									'userAVerif': myApp.form2Json($('#formLogin'))
						},
						'success': function(reponse){
							if(reponse === null){
								$('.notification').html('<div class="alert alert-dismissible bg-red text-center"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Le nom d\'utilisateur ou le mot de passe est incorrect.</div>');
							} else {
								myApp.setWhoAmI(reponse);
								FrontEnd.displayPage('pageDashboardStudent');
								
							}
						}
					 }
			myApp.myajax(config);
		}
	});
	
	$('#btnSignUp').click(function(){
		$("#formLogin").validate().resetForm();
        $('.form-line').removeClass('error focused');
		FrontEnd.displayPage('pageSignup');
	});
	
	//A mettre dans qqchoses de plus general?
	$("button").click(function() {
		$('.notification').empty();
	});
	
	//Jquery validation messages
	$('#formLogin').validate({
		messages: {
			pseudo: "Veuillez indiquer votre pseudo",
		mdp: "Veuillez indiquer votre mot de passe"
		},
		highlight: function (input) {
            $(input).parents('.form-line').addClass('error');
        },
        unhighlight: function (input) {
            $(input).parents('.form-line').removeClass('error');
        },
        errorPlacement: function (error, element) {
            $(element).parents('.form-line').after(error);
        }
	});
	
	FrontEnd.onDisplayPage('pageLogin', function(){
		//console.log('pageLogin - onDisplayPage');
		hideNavBar();
		$('body').removeClass().toggleClass('login-page');
	});
	
	
	FrontEnd.onLeavePage('pageLogin', function(){
		$('.notification').hide();
	});
});








