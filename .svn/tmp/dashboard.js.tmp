$(function() {
	// version grolaux
	var dtContacts;

	FrontEnd.onInitPage('pageDashboardStudent', function() {
		dtContacts = $('#dtContacts').DataTable({
			bAutoWidth : false,
			select : {
				style : 'single'
			},
			data : "",
			columns : [ {
				"data" : "entreprise"
			}, {
				"data" : "etat"
			}, {
				"data" : "personneContact"
			},
			// {"data" : "email"},
			// {"data" : "tel"}
			],
			rowId : 'idContact'
		});
	});

	FrontEnd.onDisplayPage('pageDashboardStudent', function() {
		console.log('onDisplayPage - pageDashBoardStudent');
		$('#whoami').text(whoami.prenom + " " + whoami.nom);
		remplirContacts();
	});

<<<<<<< .mine
	FrontEnd.onDisplayPage('pageDashboard', function(){
		console.log('hey1');
		$('#whoami').text(whoami.prenom +" " + whoami.nom);
=======
	FrontEnd.onDisplayPage('pageDashboardTeacher', function() {
		console.log('onDisplayPage - pageDashBoardTeacher');
		$('#whoami').text(whoami.prenom + " " + whoami.nom);
		remplirContacts();
>>>>>>> .r218
	});

	function remplirContacts() {
		util.myajax({
			data : {
				'action' : 'visualiserContacts',
			},
			success : function(data) {
				console.log(data);
				dtContacts.clear();
				dtContacts.rows.add(data).draw();

			}
		});
	}
	// ancienne version
	/*
	 * FrontEnd.onDisplayPage('pageDashboardStudent', function(){
	 * $('#whoami').text(whoami.prenom +" " + whoami.nom); console.log('hey');
	 * remplirContacts(); });
	 * 
	 * FrontEnd.onDisplayPage('pageDashboardTeacher', function(){
	 * $('#whoami').text(whoami.prenom +" " + whoami.nom); });
	 * 
	 * function remplirContacts(){ var dtContacts=$('#dtContacts').DataTable({
	 * destroy: true, bAutoWidth : false, select: { style: 'single' }, ajax:{
	 * type:'POST', url:'/', dataSrc:"", data:{ 'action':'visualiserContacts', },
	 * statusCode: { 422: util.err422, 401: util.err401, 500: util.err500 } },
	 * columns: [ {"data" : "entreprise"}, {"data" : "etat"}, {"data" :
	 * "personneContact"}, //{"data" : "email"}, //{"data" : "tel"} ], rowId:
	 * 'idContact' }) }
	 */

});