package ihm.servlet;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.eclipse.jetty.servlet.DefaultServlet;


public class DispatcherServlet extends DefaultServlet {

  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp)
      throws ServletException, IOException {
    // TODO Auto-generated method stub
    System.out.println(req.getRequestURI());
    if (req.getRequestURI() == "/") {
      Files.copy(new File("inc/header.html").toPath(), resp.getOutputStream());
      Files.copy(new File("inc/_login.html").toPath(), resp.getOutputStream());
      Files.copy(new File("inc/prefooter.html").toPath(), resp.getOutputStream());
      Files.copy(new File("inc/footer.html").toPath(), resp.getOutputStream());
      resp.setContentType("text/html; charset=UTF-8");
    }

  }

  @Override
  protected void doPost(HttpServletRequest req, HttpServletResponse resp)
      throws ServletException, IOException {
<<<<<<< .mine
    // TODO Auto-generated method stub

=======

    resp.setContentType("text/html; charset=UTF-8");
    String action = req.getParameter("action");

    switch (action) {
      case "signin":
        signin(req, resp);
        break;
      case "signup":
        signup(req, resp);
        break;
      default:
        break;
    }
  }

  private void signin(HttpServletRequest req, HttpServletResponse resp) throws IOException {

    String login = req.getParameter("user");
    String password = req.getParameter("pswd");
    String remoteAddr = req.getRemoteAddr();

    // TO CONTINUE
>>>>>>> .r42
  }

  private void signup(HttpServletRequest req, HttpServletResponse resp) throws IOException {

    String login = req.getParameter("user");
    String password = req.getParameter("pswd");

    // TO CONTINUE
  }
}
